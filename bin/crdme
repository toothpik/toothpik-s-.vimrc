#!/bin/bash
#  check Readme for undocumented executables
TMPNM=$(mktemp /tmp/crdme.XXXXXXXX) || exit
TMPNM2=$(mktemp /tmp/crdme.XXXXXXXX) || exit
awk '{print $1}' Readme > $TMPNM
twd=$(pwd)
if [ $twd == $HOME ]; then
    #  check awk and sed Readme on ~
    ls *.awk > $TMPNM2
    echo "" >> $TMPNM2
    ls *.sed >> $TMPNM2
elif [ $twd == "${HOME}/.vim" ]; then
    #  check *.vim Readme on ~/.vim
    ls *.vim > $TMPNM2
elif [ $twd == "${HOME}/bin" ]; then
    #  check everything executable Readme on ~/bin
    find . -maxdepth 1 -executable | grep -v '^\.$' | sed 's/^\.\///' | sort > $TMPNM2
else
    #  try to avoid including directories
    find . -maxdepth 1 -type f -executable | grep -v '^\.$' | sed 's/^\.\///' | sort > $TMPNM2
fi
diff $TMPNM $TMPNM2 | grep '^[<>]'
rm $TMPNM
rm $TMPNM2
